<!doctype html>
<html lang="en">
  <head>
    <title>Amenity Booking</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css"
      rel="stylesheet"
    />
  </head>
  <body class="dashboard-body">
    <div class="dashboard-container">
      <aside class="sidebar">
        <div class="logo">
          <i class="ri-home-smile-2-line"></i> Resident Panel
        </div>

        <ul class="menu">
          <li>
            <a
              href="/user/dashboard"
              class="{% if request.path == '/user/dashboard' %}active{% endif %}"
            >
              <i class="ri-dashboard-line"></i> Dashboard
            </a>
          </li>

          <li>
            <a
              href="/user/visitors"
              class="{% if request.path == '/user/visitors' %}active{% endif %}"
            >
              <i class="ri-shield-user-line"></i> Visitors
            </a>
          </li>

          <li>
            <a
              href="/user/polls"
              class="{% if request.path == '/user/polls' %}active{% endif %}"
            >
              <i class="ri-bar-chart-box-line"></i> Polls
            </a>
          </li>

          <li>
            <a
              href="/user/notices"
              class="{% if request.path == '/user/notices' %}active{% endif %}"
            >
              <i class="ri-notification-3-line"></i> Notices
            </a>
          </li>

          <li>
            <a
              href="/user/complaints"
              class="{% if request.path == '/user/complaints' %}active{% endif %}"
            >
              <i class="ri-feedback-line"></i> Complaints
            </a>
          </li>

          <li>
            <a
              href="/user/emergency"
              class="{% if request.path == '/user/emergency' %}active{% endif %}"
            >
              <i class="ri-phone-fill"></i> Emergency
            </a>
          </li>
          <li>
            <a
              href="/user/bookings"
              class="{% if request.path == '/user/bookings' %}active{% endif %}"
            >
              <i class="ri-calendar-check-line"></i> Bookings
            </a>
          </li>
          <li>
            <a
              href="/profile"
              class="{% if request.path == '/profile' %}active{% endif %}"
            >
              <i class="ri-user-settings-line"></i> Profile
            </a>
          </li>
        </ul>

        <a href="/logout" class="logout-btn">
          <i class="ri-logout-box-line"></i> Logout
        </a>
      </aside>

      <main class="main-content">
        <h1 class="section-title">ðŸ“… Facility Booking</h1>

        {% if error %}
        <div
          style="
            background: #ef4444;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
          "
        >
          <i class="ri-error-warning-line"></i> {{ error }}
        </div>
        {% endif %} {% if success %}
        <div
          style="
            background: #10b981;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
          "
        >
          <i class="ri-checkbox-circle-line"></i> {{ success }}
        </div>
        {% endif %}

        <div class="content-grid">
          <div class="form-box" style="height: fit-content">
            <h3 class="section-title">
              <i class="ri-add-circle-line"></i> New Reservation
            </h3>
            <form method="POST">
              <label>Select Facility</label>
              <select
                name="facility"
                required
                style="
                  width: 100%;
                  padding: 12px;
                  margin-bottom: 15px;
                  background: black;
                  border: 1px solid #333;
                  color: white;
                  border-radius: 6px;
                "
              >
                {% for f in facilities %}
                <option value="{{ f }}">{{ f }}</option>
                {% endfor %}
              </select>

              <label>Date</label>
              <input
                type="date"
                name="date"
                required
                style="width: 100%; margin-bottom: 15px"
              />

              <label>Time Slot</label>
              <select
                name="slot"
                required
                style="
                  width: 100%;
                  padding: 12px;
                  margin-bottom: 15px;
                  background: black;
                  border: 1px solid #333;
                  color: white;
                  border-radius: 6px;
                "
              >
                {% for s in slots %}
                <option value="{{ s }}">{{ s }}</option>
                {% endfor %}
              </select>

              <button type="submit" style="width: 100%">Confirm Booking</button>
            </form>
          </div>

          <div>
            <h3 class="section-title">My Bookings</h3>
            <div class="cards" style="grid-template-columns: 1fr">
              {% if my_bookings %} {% for b in my_bookings %}
              <div
                class="card"
                style="border-left: 4px solid {% if b[3] == 'Confirmed' %}#10b981{% elif b[3] == 'Rejected' %}#ef4444{% else %}#f59e0b{% endif %};"
              >
                <div class="card-header">
                  <span style="color: #aaa">{{ b[1] }}</span> {% if b[3] ==
                  'Confirmed' %}
                  <span class="status paid">Confirmed</span>
                  {% elif b[3] == 'Rejected' %}
                  <span class="status" style="background: #ef4444; color: white"
                    >Rejected</span
                  >
                  {% else %}
                  <span class="status unpaid">Pending</span>
                  {% endif %}
                </div>

                <h3 style="margin: 5px 0">{{ b[0] }}</h3>
                <p style="color: #888">{{ b[2] }}</p>
              </div>
              {% endfor %} {% else %}
              <p style="color: #666">No active bookings found.</p>
              {% endif %}
            </div>
          </div>
        </div>
      </main>
    </div>
  </body>
</html>
