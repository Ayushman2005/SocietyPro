<!doctype html>
<html lang="en">
  <head>
    <title>Admin - Manage Polls</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css"
      rel="stylesheet"
    />
    <style>
      .poll-bar {
        height: 8px;
        background: var(--primary-orange);
        border-radius: 4px;
        margin-top: 5px;
      }
    </style>
  </head>
  <body class="dashboard-body">
    <div class="dashboard-container">
      <aside class="sidebar">
        <div class="logo"><i class="ri-building-2-line"></i> AdminPanel</div>
        <ul class="menu">
          <li>
            <a href="/admin/dashboard"
              ><i class="ri-dashboard-line"></i> Dashboard</a
            >
          </li>
          <li>
            <a href="/admin/tenants"><i class="ri-user-line"></i> Tenants</a>
          </li>
          <li>
            <a href="/admin/invoices"
              ><i class="ri-file-list-3-line"></i> Invoices</a
            >
          </li>

          <li>
            <a href="/admin/visitors"
              ><i class="ri-shield-user-line"></i> Visitors</a
            >
          </li>
          <li>
            <a href="/admin/bookings"
              ><i class="ri-calendar-check-line"></i> Bookings</a
            >
          </li>
          <li>
            <a href="/admin/polls" class="active"
              ><i class="ri-bar-chart-box-line"></i> Polls</a
            >
          </li>
          <li>
            <a href="/admin/notices"
              ><i class="ri-notification-3-line"></i> Notices</a
            >
          </li>

          <li>
            <a href="/admin/complaints"
              ><i class="ri-feedback-line"></i> Complaints</a
            >
          </li>
          <li>
            <a href="/admin/settings"
              ><i class="ri-settings-4-line"></i> Settings</a
            >
          </li>
        </ul>
        <a href="/logout" class="logout-btn">
          <i class="ri-logout-box-line"></i> Logout
        </a>
      </aside>

      <main class="main-content">
        <h1 class="section-title">ðŸ“Š Community Polls</h1>

        <div class="content-grid">
          <div class="form-box" style="height: fit-content">
            <h3><i class="ri-add-line"></i> Create New Poll</h3>
            <form method="POST">
              <label>Question</label>
              <input
                type="text"
                name="question"
                placeholder="e.g. Paint Color?"
                required
              />
              <label>Option 1</label>
              <input
                type="text"
                name="option1"
                placeholder="e.g. Blue"
                required
              />
              <label>Option 2</label>
              <input
                type="text"
                name="option2"
                placeholder="e.g. White"
                required
              />
              <button type="submit">Publish Poll</button>
            </form>
          </div>

          <div class="cards" style="grid-template-columns: 1fr">
            {% for p in polls %}
            <div class="card">
              <h3>{{ p[1] }}</h3>
              <div style="margin-top: 15px; font-size: 14px">
                <div
                  style="
                    display: flex;
                    justify-content: space-between;
                    margin-bottom: 2px;
                  "
                >
                  <span>{{ p[2] }}</span> <span>{{ p[5] }} votes</span>
                </div>
                <div style="background: #333; width: 100%; border-radius: 4px">
                  <div
                    class="poll-bar"
                    style="width: {{ (p[5]/(p[5]+p[6])*100) if (p[5]+p[6]) > 0 else 0 }}%;"
                  ></div>
                </div>

                <div
                  style="
                    display: flex;
                    justify-content: space-between;
                    margin-top: 10px;
                    margin-bottom: 2px;
                  "
                >
                  <span>{{ p[3] }}</span> <span>{{ p[6] }} votes</span>
                </div>
                <div style="background: #333; width: 100%; border-radius: 4px">
                  <div
                    class="poll-bar"
                    style="width: {{ (p[6]/(p[5]+p[6])*100) if (p[5]+p[6]) > 0 else 0 }}%; background: #3b82f6;"
                  ></div>
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
      </main>
    </div>
  </body>
</html>
